<!doctype html>
<style>
	.button-wrapper .btn {
		margin-bottom:5px;
	}
</style>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	</head>
	<body> 
		<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
	
		<div class="container-fluid">
			<div class="row">
				<div class="col-1">
					<div class="btn-group-vertical button-wrapper">
						<div class="dropdown">
							<button class="btn btn-secondary dropdown-toggle" type="button" id="driver" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Driver
							</button>
							<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
								<button type="button" id="driver.name" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Name</button>
								<button type="button" id="driver.experience" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Experience</button>
								<button type="button" id="driver.age" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Age</button>
							</div>
						</div>
						<div class="dropdown">
							<button class="btn btn-secondary dropdown-toggle" type="button" id="customer" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Customer
							</button>
							<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
								<button type="button" id="customer.name" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Name</button>
								<button type="button" id="customer.vehicles" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Vehicles</button>
							</div>
						</div>
						<div class="dropdown">
							<button class="btn btn-secondary dropdown-toggle" type="button" id="location" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Location
							</button>
							<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
								<button type="button" id="location.longitude" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Longitude</button>
								<button type="button" id="location.latitude" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Latitude</button>
								<button type="button" id="location.speed" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Speed</button>
							</div>
						</div>
						<div class="dropdown">
							<button class="btn btn-secondary dropdown-toggle" type="button" id="date" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Date
							</button>
							<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
								<button type="button" id="date.day" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Day</button>
								<button type="button" id="date.time" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Time</button>
							</div>
						</div>
						<div class="dropdown">
							<button class="btn btn-secondary dropdown-toggle" type="button" id="vehicle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Vehicle
							</button>
							<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
								<button type="button" id="vehicle.type" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Type</button>
								<button type="button" id="vehicle.length" value="attribute" onclick="onClickAttribute(this)" class="btn btn-sm btn-outline-dark">Length</button>
							</div>
						</div>
					</div>
				</div>
				<div class="col-1">
					<div class="btn-group-vertical button-wrapper">
						<button type="button" id="equal" value="sign" style="visibility:hidden" onclick="onClickSign(this)" class="btn btn-sm btn-outline-dark">Equal</button>
						<button type="button" id="notEqual" value="sign" style="visibility:hidden" onclick="onClickSign(this)" class="btn btn-sm btn-outline-dark">Not Equal</button>
						<button type="button" id="greaterThan" value="sign" style="visibility:hidden" onclick="onClickSign(this)" class="btn btn-sm btn-outline-dark">Greater Than</button>
						<button type="button" id="greaterThanEqual" value="sign" style="visibility:hidden" onclick="onClickSign(this)" class="btn btn-sm btn-outline-dark">Greater Than/Equal To</button>
						<button type="button" id="lessThan" value="sign" style="visibility:hidden" onclick="onClickSign(this)" class="btn btn-sm btn-outline-dark">Less Than</button>
						<button type="button" id="lessThanEqual" value="sign" style="visibility:hidden" onclick="onClickSign(this)" class="btn btn-sm btn-outline-dark">Less Than/Equal To</button>
					</div>
				</div>
				<div class="col-1">
					<input type="text" class="form-control-plaintext" id="value" style="visibility:hidden" value="" placeholder="Enter Value:">
					<button type="button" id="enterValue" style="visibility:hidden" onclick="onClickValue()" class="btn btn-sm btn-primary">Enter</button>
				</div>
				<div class="col-1">
					<div class="btn-group-vertical button-wrapper">
						<button type="button" id="and" value="andOr" style="visibility:hidden" onclick="onClickAndOr(this)" class="btn btn-sm btn-outline-dark">And</button>
						<button type="button" id="or" value="andOr" style="visibility:hidden" onclick="onClickAndOr(this)" class="btn btn-sm btn-outline-dark">Or</button>
					</div>
				</div>
				<div class="col-4">
					<p id="equation"></p>
					<textarea class="form-control" id="output" rows="10" style="min-width: 100%" readonly></textarea>
				</div>
				<div class="col-2">
				</div>
				<div class="col-1">
					<input type="checkbox" checked data-toggle="toggle" data-size="large"> data-on="Group Progress" data-off="Separate Progress">
				</div>
				<div class="col-1">
					<div class="btn-group-vertical button-wrapper">
						<button type="button" id="backspace" value="backspace" style="visibility:hidden" onclick="onClickBackspace(this)" class="btn btn-sm btn-outline-dark"><<<</button>
						<button type="button" id="finalize" style="visibility:hidden" onclick="onClickFinalize()" class="btn btn-sm btn-outline-dark">Finalize</button>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			var buildEquation = new Array();
				var buildEquationLiteral = new Array();
				var tracker = -1;
				var allowedInput = false;
				var update =  document.getElementById("value").value.toString();
				setInterval(function() { 
					if (document.getElementById("value").value.toString() != update) {
						update = document.getElementById("value").value.toString();
						document.getElementById("output").value = buildEquation.join("") + update;
					}
				}, 50);
			function onClickValue() {
				var entered = document.getElementById("value").value.toString();
				document.getElementById("value").value = "";
				if (/^[a-zA-Z]+$/.test(entered) == true && allowedInput == true) {
					buildEquation.push(entered + " ");
					buildEquationLiteral.push("\"" + entered + "\"");
					setScreen();
				} else if (/^\d+$/.test(entered) == true && allowedInput == false) {
					buildEquation.push(entered + " ");
					buildEquationLiteral.push(entered);
					setScreen();
				}
			}
			function onClickSign(pressed) {
				if (pressed.id == "greaterThan") {
					buildEquation.push("is greater than ");
					buildEquationLiteral.push(">");
				} else if (pressed.id == "lessThan") {
					buildEquation.push("is less than ");
					buildEquationLiteral.push("<");
				} else if (pressed.id == "equal") {
					buildEquation.push("is equal to ");
					buildEquationLiteral.push("==");
				} else if (pressed.id == "notEqual") {
					buildEquation.push("is not equal to ");
					buildEquationLiteral.push("!=");
				} else if (pressed.id == "greaterThanEqual") {
					buildEquation.push("is greater than/equal to ");
					buildEquationLiteral.push(">=");
				} else {
					buildEquation.push("is less than/equal to ");
					buildEquationLiteral.push("<=");
				}
				setScreen();
			}
			function onClickAndOr(pressed) {
				if (pressed.id == "and") {
					buildEquationLiteral.push("&& ");
				} else {
					buildEquationLiteral.push("|| ");
				}
				buildEquation.push("\n");
				buildEquation.push(pressed.id);
				buildEquation.push("\n");
				setScreen();
			}
			function onClickAttribute(pressed) {
				buildEquationLiteral.push(pressed.id);
				var index = pressed.id.indexOf(".");
				buildEquation.push(pressed.id.substring(index + 1) + " ");
				setScreen();
				if (pressed.id == "driver.name" || pressed.id == "customer.name" ||pressed.id == "date.day" || pressed.id == "vehicle.type") {
					allowedInput = true;
					stringOnly();
				} else {
					allowedInput = false;
				}
			}
			function onClickBackspace(pressed) {
				buildEquation.pop();
				buildEquationLiteral.pop();
				if (buildEquation[buildEquation.length - 1] == "or" || buildEquation[buildEquation.length - 1] == "and") {
					buildEquation.pop();
					buildEquation.pop();
				}
				tracker += 2;
				reset();
				setScreen();
				document.getElementById("equation").innerHTML = "";
				if (buildEquation[buildEquation.length - 1] == "name " || buildEquation[buildEquation.length - 1] == "day ") {
					stringOnly();
				}
			}
			function onClickFinalize() {
				document.getElementById("equation").innerHTML = "if ((" + buildEquationLiteral.join(" ") + ") == true)";
				reset();
			}
			function setScreen() {
				tracker += 1;
				if (tracker > 3) {
					tracker -= 4;
				}
				var hidden = [
					["driver", "customer", "location", "date", "vehicle", "finalize"],
					["equal", "notEqual", "greaterThan", "greaterThanEqual", "lessThan", "lessThanEqual", "finalize"],
					["value", "enterValue"],
					["and", "or", "finalize"]
				];
				var visible = [
					["equal", "notEqual", "greaterThan", "greaterThanEqual", "lessThan", "lessThanEqual"],
					["value", "enterValue"],
					["and", "or", "finalize"],
					["driver", "customer", "location", "date", "vehicle"]
				];
				document.getElementById("output").value = buildEquation.join("");
				for (var i in hidden[tracker]) {
						document.getElementById(hidden[tracker][i]).style.visibility = "hidden";
					}
				for (var i in visible[tracker]) {
						document.getElementById(visible[tracker][i]).style.visibility = "visible";
				}
				if (buildEquation.length > 0) {
					document.getElementById("backspace").style.visibility = "visible";
				} else {
					document.getElementById("backspace").style.visibility = "hidden";
				}
			}
			function reset() {
				document.getElementById("driver").style.visibility = "hidden";
				document.getElementById("customer").style.visibility = "hidden";
				document.getElementById("location").style.visibility = "hidden";
				document.getElementById("date").style.visibility = "hidden";
				document.getElementById("vehicle").style.visibility = "hidden";
				document.getElementById("equal").style.visibility = "hidden";
				document.getElementById("notEqual").style.visibility = "hidden";
				document.getElementById("greaterThan").style.visibility = "hidden";
				document.getElementById("greaterThanEqual").style.visibility = "hidden";
				document.getElementById("lessThan").style.visibility = "hidden";
				document.getElementById("lessThanEqual").style.visibility = "hidden";
				document.getElementById("and").style.visibility = "hidden";
				document.getElementById("or").style.visibility = "hidden";
				document.getElementById("value").style.visibility = "hidden";
				document.getElementById("enterValue").style.visibility = "hidden";
				document.getElementById("finalize").style.visibility = "hidden";
			}
			function stringOnly() {
				document.getElementById("greaterThan").style.visibility = "hidden";
				document.getElementById("greaterThanEqual").style.visibility = "hidden";
				document.getElementById("lessThan").style.visibility = "hidden";
				document.getElementById("lessThanEqual").style.visibility = "hidden";
			}
		</script>
	</body>
</html>
